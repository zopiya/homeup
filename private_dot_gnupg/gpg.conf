# ==============================================================================
# GPG Configuration - Modern Best Practices
# ==============================================================================
# Based on: https://github.com/drduh/config/blob/master/gpg.conf
# Updated: 2024 recommendations for GPG 2.4+
#
# IMPORTANT: Git Signing Architecture
#   - Git commits/tags: Use SSH keys (see ~/.config/git/config)
#   - GPG usage: General-purpose encryption, signing, and verification
#   - This file: Universal across all profiles (macos/linux/mini)
#
# Use Cases:
#   - Encrypt sensitive files: gpg -e -r <email> file.txt
#   - Sign files:             gpg -s file.txt
#   - Verify signatures:      gpg --verify file.txt.sig
#   - NOT for Git signing:    Handled by SSH (see git config gpg.format)
# ==============================================================================

# --- Algorithm Preferences (Modern Crypto) ---
# Prefer strongest algorithms first
personal-cipher-preferences AES256 AES192 AES
personal-digest-preferences SHA512 SHA384 SHA256
personal-compress-preferences ZLIB BZIP2 ZIP Uncompressed

# Default preferences for new keys
default-preference-list SHA512 SHA384 SHA256 AES256 AES192 AES ZLIB BZIP2 ZIP Uncompressed

# Use SHA512 for certifications and key derivation
cert-digest-algo SHA512
s2k-digest-algo SHA512
s2k-cipher-algo AES256
s2k-count 65011712

# --- Output Behavior ---
charset utf-8
no-greeting
no-emit-version
no-comments
keyid-format 0xlong
with-fingerprint

# Display options for transparency
list-options show-uid-validity
verify-options show-uid-validity show-notations show-policy-url

# --- Security Hardening ---
# Require cross-certification on signatures
require-cross-certification

# Disable caching of symmetric keys (security over convenience)
no-symkey-cache

# Disable inclusion of key IDs in packets (privacy)
throw-keyids

# Use full fingerprints in signatures
ask-cert-level

# Prevent version info leakage
export-options export-minimal

# --- Keyserver Configuration ---
# Use modern keyserver with HKPS
keyserver hkps://keys.openpgp.org
keyserver-options no-honor-keyserver-url
keyserver-options include-revoked

# Auto-retrieve keys when verifying signatures
auto-key-retrieve

# --- Trust Model ---
# Explicit trust (no automatic trust)
trust-model tofu+pgp

# --- Display ---
# Show full key fingerprints
fixed-list-mode
