# Enable SSH support (allows using GPG key for SSH authentication)
enable-ssh-support

# Cache settings
# default-cache-ttl: 1 hour (3600 seconds)
# max-cache-ttl: 1 day (86400 seconds)
default-cache-ttl 3600
max-cache-ttl 86400

{{- if eq .chezmoi.os "darwin" }}
# macOS: Use pinentry-mac from Homebrew (GUI password prompt)
{{-   if eq .chezmoi.arch "arm64" }}
pinentry-program /opt/homebrew/bin/pinentry-mac  # Apple Silicon
{{-   else }}
pinentry-program /usr/local/bin/pinentry-mac      # Intel Mac
{{-   end }}
{{- else }}
# Linux: Dynamic pinentry detection with fallback chain
# Priority: Homebrew (shared) > Homebrew (user) > System
{{-   if stat "/home/linuxbrew/.linuxbrew/bin/pinentry" }}
pinentry-program /home/linuxbrew/.linuxbrew/bin/pinentry
{{-   else if stat (printf "%s/.linuxbrew/bin/pinentry" .chezmoi.homeDir) }}
pinentry-program {{ .chezmoi.homeDir }}/.linuxbrew/bin/pinentry
{{-   else }}
pinentry-program /usr/bin/pinentry  # System fallback
{{-   end }}
{{- end }}
