{{ if (get . "install_core_cli") -}}
# Core CLI Tools
brew "bat"
brew "chezmoi"
brew "curl"
brew "eza"
brew "fd"
brew "fzf"
brew "gh"
brew "git"
brew "git-delta"
brew "httpie"
brew "jq"
brew "lazygit"
brew "neovim"
brew "pnpm"
brew "ripgrep"
brew "sheldon"
brew "starship"
brew "uv"
brew "wget"
brew "yazi"
brew "yq"
brew "zoxide"
brew "zsh"
brew "tmux"
{{ end -}}

{{ if (get . "install_fonts") -}}
# Fonts
cask "font-jetbrains-mono-nerd-font"
cask "font-hack-nerd-font"
cask "font-noto-sans"
cask "font-source-han-serif-vf"
{{ end -}}

{{/* Security Module: Optional (YubiKey/GPG/1Password) */}}
{{ if (get . "install_security") -}}
# Security Tools
{{- if eq .chezmoi.os "darwin" }}
cask "1password-cli"  {{/* macOS: Install via Cask for better integration */}}
{{- else }}
brew "1password-cli"  {{/* Linux: Install via Homebrew formula */}}
{{- end }}
brew "age"
brew "gnupg"
brew "ykman"

{{   if eq .chezmoi.os "darwin" -}}
brew "pinentry-mac"  {{/* macOS-specific: GUI password entry */}}
{{   end -}}
{{ end -}}

{{/* GUI Module: Only install if not in headless mode (Linux GUI uses Flatpak) */}}
{{ if and (get . "install_gui") (not (get . "headless")) -}}
# GUI Applications (macOS)
{{   if eq .chezmoi.os "darwin" -}}
cask "1password"
cask "dbeaver-community"
cask "electerm"
cask "firefox"
cask "google-chrome"
cask "iterm2"
cask "jetbrains-toolbox"
cask "keka"
cask "localsend"
cask "nextcloud"
cask "obsidian"
cask "stats"
cask "typora"
cask "visual-studio-code"
cask "vlc"
{{   end -}}
{{ end -}}

{{ if (get . "install_mise") -}}
# Development Runtimes
brew "mise"
{{ end -}}

{{ if (get . "install_maintenance") -}}
# Maintenance Tools
brew "restic"
brew "topgrade"
{{ end -}}
