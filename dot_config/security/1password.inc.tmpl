{{- /* 1Password Integration - Workstation Only */ -}}
{{- $profile := .profile | default "workstation" -}}

# 1Password CLI Integration (Profile: {{ $profile }})
{{- if eq $profile "workstation" }}
if command -v op &> /dev/null; then
    # --- Completion ---
    # Enable 1Password CLI completions
    eval "$(op completion zsh 2>/dev/null)" || true

    # --- SSH Agent ---
    # Currently disabled in favor of YubiKey FIDO (Native Agent).
    # To enable 1Password SSH Agent:
    # 1. Enable "SSH Agent" in 1Password Desktop App (Developer Settings)
    # 2. Uncomment the following line:
    # export SSH_AUTH_SOCK="$HOME/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock"

    # --- Aliases ---
    # Minimal set for occasional use
    alias ops="op signin"
    alias opw="op whoami"
fi
{{- else }}
# 1Password disabled for {{ $profile }} profile
{{- end }}
