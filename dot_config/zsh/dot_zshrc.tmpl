{{- /* ==============================================================================
Zsh Configuration - Entry Point

This file only sources modular configuration files in the correct order.
Each module has a single responsibility:

  1. brew.zsh       - Homebrew environment & system tool isolation
  2. ssh-agent.zsh  - Homebrew ssh-agent (replaces macOS system agent)
  3. exports.zsh    - Environment variables
  4. tools.zsh      - Development tool initialization (starship, zoxide, etc.)
  5. aliases.zsh    - Command aliases
  6. functions.zsh  - Shell functions

============================================================================== */ -}}
{{- $profile := .profile | default "mini" -}}

# ==============================================================================
# Zsh Configuration (Profile: {{ $profile }})
# ==============================================================================

# ------------------------------------------------------------------------------
# Module Loading Order (order matters!)
# ------------------------------------------------------------------------------
#
# 1. Homebrew must be first (sets PATH, BREW_PREFIX for other modules)
# 2. Exports before tools (some tools read env vars)
# 3. Tools before aliases/functions (sets up completions)
# 4. Aliases and functions last (may depend on tools)

# Homebrew environment & tool isolation
[[ -f "$ZDOTDIR/brew.zsh" ]] && source "$ZDOTDIR/brew.zsh"

# SSH agent (Homebrew, must be after brew.zsh)
[[ -f "$ZDOTDIR/ssh-agent.zsh" ]] && source "$ZDOTDIR/ssh-agent.zsh"

# User PATH additions
export PATH="$HOME/.local/bin:$PATH"

# Environment variables
[[ -f "$ZDOTDIR/exports.zsh" ]] && source "$ZDOTDIR/exports.zsh"

# Development tools (plugins, prompt, navigation, etc.)
[[ -f "$ZDOTDIR/tools.zsh" ]] && source "$ZDOTDIR/tools.zsh"

# Aliases
[[ -f "$ZDOTDIR/aliases.zsh" ]] && source "$ZDOTDIR/aliases.zsh"

# Functions
[[ -f "$ZDOTDIR/functions.zsh" ]] && source "$ZDOTDIR/functions.zsh"

# Local overrides (not managed by chezmoi)
[[ -f "$ZDOTDIR/local.zsh" ]] && source "$ZDOTDIR/local.zsh"
