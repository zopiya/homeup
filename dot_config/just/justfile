# ==============================================================================
# Just Global Configuration
# ==============================================================================
# User-level global recipes
# Location: ~/.config/just/justfile
# ==============================================================================

set shell := ["zsh", "-c"]

# ------------------------------------------------------------------------------
# Global Recipes
# ------------------------------------------------------------------------------

# List available recipes
@default:
    just --list --justfile {{justfile()}}

# Show system info
@info:
    echo "OS: {{os()}}"
    echo "Arch: {{arch()}}"
    echo "Shell: $SHELL"
    echo "Just: $(just --version)"

# Update system (topgrade or brew)
@update:
    if command -v topgrade &>/dev/null; then \
        topgrade; \
    else \
        brew update && brew upgrade && brew cleanup; \
    fi

# ------------------------------------------------------------------------------
# Utilities
# ------------------------------------------------------------------------------

# Generate random password
gen-pass length="16":
    @openssl rand -base64 48 | cut -c1-{{length}}

# Serve current directory
serve port="8000":
    @python3 -m http.server {{port}}

# Create temporary directory and cd into it
tmpdir:
    #!/usr/bin/env zsh
    dir=$(mktemp -d)
    echo "Created: $dir"
    cd "$dir" && $SHELL
